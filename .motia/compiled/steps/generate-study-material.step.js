import "dotenv/config";
const config = {
  name: "GenerateStudyMaterial",
  type: "api",
  path: "/api/generate-study-material",
  method: "POST",
  emits: ["study.submit"],
  flows: ["student-workflow"]
};
const handler = async (req, { emit, logger }) => {
  const { text } = req.body ?? {};
  if (!text || text.trim().length === 0) {
    logger.warn("Empty text received");
    return {
      status: 400,
      body: { error: 'Please provide lecture text in "text" field' }
    };
  }
  logger.info("\u{1F4E5} Received study material request", {
    textLength: text.length
  });
  await emit({
    topic: "study.submit",
    data: { text }
  });
  return {
    status: 200,
    body: {
      status: "processing",
      message: "Study material generation started",
      preview: text.slice(0, 120) + "..."
    }
  };
};
export {
  config,
  handler
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3RlcHMvZ2VuZXJhdGUtc3R1ZHktbWF0ZXJpYWwuc3RlcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IFwiZG90ZW52L2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIG5hbWU6IFwiR2VuZXJhdGVTdHVkeU1hdGVyaWFsXCIsXHJcbiAgICB0eXBlOiBcImFwaVwiLFxyXG4gICAgcGF0aDogXCIvYXBpL2dlbmVyYXRlLXN0dWR5LW1hdGVyaWFsXCIsXHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgZW1pdHM6IFtcInN0dWR5LnN1Ym1pdFwiXSxcclxuICAgIGZsb3dzOiBbXCJzdHVkZW50LXdvcmtmbG93XCJdLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyAocmVxOiBhbnksIHsgZW1pdCwgbG9nZ2VyIH06IGFueSkgPT4ge1xyXG4gICAgY29uc3QgeyB0ZXh0IH0gPSByZXEuYm9keSA/PyB7fTtcclxuXHJcbiAgICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJFbXB0eSB0ZXh0IHJlY2VpdmVkXCIpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXR1czogNDAwLFxyXG4gICAgICAgICAgICBib2R5OiB7IGVycm9yOiAnUGxlYXNlIHByb3ZpZGUgbGVjdHVyZSB0ZXh0IGluIFwidGV4dFwiIGZpZWxkJyB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbG9nZ2VyLmluZm8oXCJcdUQ4M0RcdURDRTUgUmVjZWl2ZWQgc3R1ZHkgbWF0ZXJpYWwgcmVxdWVzdFwiLCB7XHJcbiAgICAgICAgdGV4dExlbmd0aDogdGV4dC5sZW5ndGgsXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBlbWl0KHtcclxuICAgICAgICB0b3BpYzogXCJzdHVkeS5zdWJtaXRcIixcclxuICAgICAgICBkYXRhOiB7IHRleHQgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwicHJvY2Vzc2luZ1wiLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlN0dWR5IG1hdGVyaWFsIGdlbmVyYXRpb24gc3RhcnRlZFwiLFxyXG4gICAgICAgICAgICBwcmV2aWV3OiB0ZXh0LnNsaWNlKDAsIDEyMCkgKyBcIi4uLlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59O1xyXG4iXSwKICAibWFwcGluZ3MiOiAiQUFBQSxPQUFPO0FBRUEsTUFBTSxTQUFTO0FBQUEsRUFDbEIsTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sUUFBUTtBQUFBLEVBQ1IsT0FBTyxDQUFDLGNBQWM7QUFBQSxFQUN0QixPQUFPLENBQUMsa0JBQWtCO0FBQzlCO0FBRU8sTUFBTSxVQUFVLE9BQU8sS0FBVSxFQUFFLE1BQU0sT0FBTyxNQUFXO0FBQzlELFFBQU0sRUFBRSxLQUFLLElBQUksSUFBSSxRQUFRLENBQUM7QUFFOUIsTUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLEVBQUUsV0FBVyxHQUFHO0FBQ25DLFdBQU8sS0FBSyxxQkFBcUI7QUFDakMsV0FBTztBQUFBLE1BQ0gsUUFBUTtBQUFBLE1BQ1IsTUFBTSxFQUFFLE9BQU8sOENBQThDO0FBQUEsSUFDakU7QUFBQSxFQUNKO0FBRUEsU0FBTyxLQUFLLDZDQUFzQztBQUFBLElBQzlDLFlBQVksS0FBSztBQUFBLEVBQ3JCLENBQUM7QUFFRCxRQUFNLEtBQUs7QUFBQSxJQUNQLE9BQU87QUFBQSxJQUNQLE1BQU0sRUFBRSxLQUFLO0FBQUEsRUFDakIsQ0FBQztBQUVELFNBQU87QUFBQSxJQUNILFFBQVE7QUFBQSxJQUNSLE1BQU07QUFBQSxNQUNGLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxNQUNULFNBQVMsS0FBSyxNQUFNLEdBQUcsR0FBRyxJQUFJO0FBQUEsSUFDbEM7QUFBQSxFQUNKO0FBQ0o7IiwKICAibmFtZXMiOiBbXQp9Cg==
